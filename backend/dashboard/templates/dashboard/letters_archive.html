{% extends 'dashboard/_base.html' %}

{% block content %}
<div class="container-fluid p-4 bg-white">
    <div class="row">
        <div class="col-lg-12">
            <table class="table table-striped table-hover bg-light-gray">
                <thead>
                <tr>
                    <th scope="col" class="border border-0">Номер відстеження</th>
                    <th scope="col" class="border border-0">Відмітки</th>
                    <th scope="col" class="border border-0">Отримувач</th>
                    <th scope="col" class="border border-0">Дата надходження/Збереження до</th>
                    <th scope="col" class="border border-0">Фото</th>
                </tr>
                </thead>
                <tbody>
                {% for item in letters %}
                <tr>
                    <td class="border border-0">
                        <a href="https://track.ukrposhta.ua/tracking_UA.html?barcode={{item.track_number}}"
                           class="btn button-light right-angle"
                           title="Відстежити"
                           target="_blank">
                            {{ item.track_number }}
                        </a>
                    </td>
                    <td class="d-flex flex-row border border-0">
                        {% if not item.is_court %}
                        <div class="alert alert-secondary right-angle" role="alert">
                            <strong>Суд</strong>
                        </div>
                        {% else %}
                        <div class="alert alert-dark right-angle" role="alert">
                            <strong>Суд</strong>
                        </div>
                        {% endif %}


                        {% if not item.is_court_subpoena %}
                        <div class="alert alert-secondary right-angle" role="alert">
                            <strong>Повістка</strong>
                        </div>
                        {% else %}
                        <div class="alert alert-warning right-angle" role="alert">
                            <strong>Повістка</strong>
                        </div>
                        {% endif %}

                        {% if not item.is_police_subpoena %}
                        <div class="alert alert-secondary right-angle" role="alert">
                            <strong>Штраф</strong>
                        </div>
                        {% else %}
                        <div class="alert alert-primary right-angle" role="alert">
                            <strong>Штраф</strong>
                        </div>
                        {% endif %}
                    </td>
                    <td class="border border-0">
                        {{ item.address.get_street_display }} {{ item.address.build }}
                        {% if item.address.build_letter %}
                        {{ item.address.build_letter }}
                        {% endif %}
                        {% if item.address.apartment %}
                        /
                        {{ item.address.apartment }}
                        {% endif %}
                    </td>
                    <td class="border border-0">
                        <p>{{ item.date_of_receipt|date:'d.m.Y' }} / {{ item.expired_date| date:'d.m.Y' }}</p>
                        {% if item.expired_time <= 3 and item.expired_time > 0 %}
                        <div class="alert alert-warning" role="alert">
                            Закінчується термін збереження листа. Залишок днів:
                            <strong>{{ item.expired_time }}</strong>
                        </div>
                        {% elif item.expired_time == 0 %}
                        <h5><span class="badge bg-secondary right-angle">
                            Сьогодні лист повертається
                        </span></h5>
                        {% elif item.expired_time < 0 %}
                        <h5><span class="text-warning">
                            Лист повернуто
                        </span></h5>
                        {% endif %}
                    </td>
                    <td class="border border-0">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQq3KKxatmkx5h29Eilsm2Myj78RjMqgMOvv71gY7N6z1YrS-2C2N9IHGS2V5HXgejTXUk&usqp=CAU"
                             class="img-thumbnail right-angle" alt="..." width="100">
                        <!--                <a href="{{ item.letter_image }}" class="btn button-light right-angle" target="_blank">{{ item.track_number }}</a>-->
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="row justify-content-center">
    <div class="col-lg-2 d-flex justify-content-center">
        <!-- pagination-->
        <nav class="mt-1 mx-auto"
             aria-label="Page navigation example">
            <ul class="pagination">
                <li class="page-item">
                    {% if letters_numbers.has_previous %}
                    <a class="page-link"
                       href="?page={{ letters_numbers.previous_page.number }}"
                       aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                    {% endif %}
                </li>
                {% for page in letters_numbers.paginator.page_range %}
                {% if page > letters_numbers.number|add:-10 and page < letters_numbers.number|add:10 %}
                <li class="page-item"><a class="page-link"
                                         href="?page={{ page }}">{{ page }}</a>
                </li>
                {% endif %}
                {% endfor %}
                {% if letters_numbers.has_next %}
                <li class="page-item">
                    <a class="page-link"
                       href="?page={{ letters_numbers.paginator.num_pages }}"
                       aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                {% endif %}
                <li class="page-item">
                </li>
            </ul>
        </nav>
        <!-- /pagination-->
    </div>
</div>
{% endblock %}